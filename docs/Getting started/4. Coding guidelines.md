
# Coding guidelines

## Quy Tắc Đặt Tên

- Dùng **PascalCase** cho tên kiểu.
- **Không cần** sử dụng tiền tố `I` cho interface.
- Dùng **PascalCase** cho giá trị enum.
- Dùng **UPPER_CASE** cho giá trị dùng cho toàn bộ dự án.
- Dùng **camelCase** cho:
  - Tên hàm
  - Tên thuộc tính
  - Biến cục bộ
- **Không** dùng `_` làm tiền tố cho thuộc tính private (khi dùng class).
- Dùng **từ đủ ý nghĩa** trong tên.

---

## Kiểu Dữ Liệu (Types)

- **Không** export type/hàm trừ khi cần chia sẻ.
- Các kiểu dùng chung nên đặt trong `types.ts`.
- Định nghĩa kiểu nên được đặt **đầu file** (ưu tiên sử dụng **type**).

---

## `null` và `undefined`

- Dùng `undefined`.
- **Không** dùng `null`.

---

## Giả Định Chung

- Đối tượng như `Node`, `Symbol`,... được coi là **bất biến** bên ngoài component tạo ra nó.
- Mảng được coi là **bất biến** sau khi tạo.
- Trong core compiler pipeline, **không dùng class**, thay vào đó dùng **function closures**.

---

## Flags

- Nếu có hơn 2 thuộc tính boolean liên quan, hãy dùng **flag**.

---

## Ghi Chú (Comments)

- Dùng **JSDoc** cho:
  - Hàm
  - Interface
  - Enum
  - Class

---

## Chuỗi (Strings)

- Dùng **dấu nháy đơn** cho string.
- Tất cả string hiển thị với người dùng phải được **i18n hóa** (thêm vào `translation.json`).

## Cấu Trúc Chung

- **Tránh** `for..in`. Thay vào đó dùng:
  - `ts.forEach`
  - `ts.forEachKey`
  - `ts.forEachValue`
- Ưu tiên `ts.forEach`, `ts.map`, `ts.filter` thay vì vòng lặp nếu phù hợp.
- Chú ý tối ưu số vòng lặp

---

## Quy Tắc Cú Pháp

### Arrow Functions

- Dùng arrow function thay vì anonymous.
- Chỉ bọc tham số nếu **thật sự cần thiết**.

✅ Đúng:

```ts
x => x + x
(x, y) => x + y
<T>(x: T, y: T) => x === y
```

❌ Sai:

```ts
(x) => x + x
```

### Block code và Dấu Ngoặc Nhọn

- Luôn dùng dấu ngoặc `{}` cho thân vòng lặp và điều kiện.
- Dấu ngoặc mở `{` cùng dòng với câu lệnh.

✅ Đúng:

```ts
if (x < 10) {
    doSomething();
}
```

❌ Sai:

```ts
if (x < 10) 
{
    doSomething();
}
```

### Khoảng Trắng

- Không có khoảng trắng quanh biểu thức trong ngoặc tròn.
- Có **1 khoảng trắng** sau dấu phẩy, dấu hai chấm, dấu chấm phẩy.

✅ Đúng:

```ts
for (let i = 0, n = str.length; i < 10; i++) { }
function f(x: number, y: string): void { }
```

### Khai Báo Biến

- Mỗi biến một dòng khai báo.

✅ Đúng:

```ts
let x = 1;
let y = 2;
```

❌ Sai:

```ts
let x = 1, y = 2;
```

### Dòng `else`

- Ưu tiên dùng **early return**

```ts
if (x) {
  doSomething();
  return;
}
doSomethingElse();
```

- `else` nằm trên **dòng mới** sau dấu đóng `}`.
✅ Đúng:

```ts
if (x) {
  doSomething();
}
else {
  doSomethingElse();
}
```

### Thụt Dòng

- Dùng **2 khoảng trắng** mỗi cấp.

---
